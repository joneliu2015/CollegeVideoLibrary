<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="renderer" content="webkit">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<meta name="renderer" content="webkit">
		<!--<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">-->
		<title>前途院校库-全球院校采访精彩回顾</title>
		<!-- Bootstrap -->
		<link href="lib/bootstrap-3.3.7-dist/css/bootstrap.css" rel="stylesheet">
		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
    		<script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    		<script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    	<![endif]-->
		<link rel="stylesheet" href="css/index.css">
		<script src="lib/template-web.js"></script>
		<script src="js/jquery1.11.3.js"></script>
		<script src="lib/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
		<script src="lib/layer/layer.js"></script>

	</head>

	<body>
		<header class="container-fluid ">

			<img class="top_pc  img-responsive center-block hidden-xs row" src="./img/top.jpg" alt="">
			<img class="top_mobi  img-responsive center-block visible-xs-block row" src="./img/top_mobi.jpg" alt="">
		</header>

		<div class="container">
			<ul class="row country">
				<li class="col-xs-4 col-md-3 active selected" id="Americia">美国</li>
				<li class="col-xs-4 col-md-3" id="England">英国</li>
				<li class="col-xs-4 col-md-3" id="Canada">加拿大</li>
				<li class="col-xs-4 col-md-3" id="Austrilia">澳大利亚</li>
				<li class="col-xs-4 col-md-3" id="NewZealand">新西兰</li>
				<li class="col-xs-4 col-md-3" id="Europe">欧洲</li>
				<li class="col-xs-4 col-md-3" id="Asia">亚洲</li>
			</ul>
		</div>
		<div class="line"></div>
		<div class=" content ">
			<div class="container neirong">

				<div class="left fl">
					<div class="titless ">
						热门视频
					</div>
					<div class="medialist " id="medialist">

						<!--<div class="yitiao clearfix">
								<div class="reload pull-left">
									<img src="img/reload1.jpg" alt="" />
								</div>
								<div class="info pull-left">
									<div class='top'>
										<span class="classify">家庭教育</span>
										<span class="title">父母该如何做好家庭教育</span>
										<span class="pubdate pull-right"></span>
										<span class="glyphicon glyphicon-time pull-right"></span>
										
									</div>
									<p class='intro text-overflow'>
											好的教育，应该是父母通过孩子这把镜子，不断发现自我、修正自我、挖掘自我，并用新我来为孩子做示范和表率。我们是在教育孩子的过程中，遇见了更好的自己
									</p>
									<div class="bot">
										<span class="jia">嘉</span>
										<span class="name">刘亚春</span>
										<span class="zhi">职</span>
										<span class="position">新东方前途出国留学家庭预备营负责人</span>
										<span class="glyphicon glyphicon-eye-open"></span>
										<span class="click-rite">888</span>
									</div>
								</div>
							</div>
						-->
                     
					</div>
					<div id="page" style="width:450px;margin:0 auto;"></div>  
				</div>

				<!--模板引擎-->

				<script id="template" type="text/html">
					
					<div class="item clearfix">
						<div class="reload pull-left">
							<div>
								<img class="reloadimg" src="<%=items.imgsrc%>" alt="" />
							</div>
						</div>
						<div class="info pull-left">
							<div class='top'>
								<span class="classify"><%=items.classify%></span>
								<span class="title"><%=items.title%></span>
								<span class="pubdate "><%=items.pubdate%></span>
								<span class="glyphicon glyphicon-time "></span>
							</div>
							<p class='intro text-overflow'>
								<%=items.intro%>
							</p>
							<div class="bot">
								<span class="jia">嘉</span>
								<span class="name"><%=items.name%></span>
								<span class="zhi">职</span>
								<span class="position"><%=items.position%></span>
								<span class="click-rite"></span>
							</div>
						</div>

					</div>
				

				</script>

				<!--模板引擎-->

				<script type="text/javascript">
					window.onload = function() {
						var data;
						$.ajax({
							dataType: 'json',
							url: 'data.json',
							data: data,
							type: 'get',
							success: function(data, key) {
								console.log(data);
								//转化为js对象
								var jsArr = data;

								//包装为js对象
								console.log(jsArr)

								//遍历JSON对象，将JSON对象转化为数组
								for(var key in jsArr) {
									console.log(jsArr[key])
								};

								//点击国家按钮显示指定内容
								$("body").on("click", ".country>li", function(e) {

									$(this).addClass('active').siblings().removeClass('active');

									// alert("被电击了")

									//获取当前tab中鼠标停在的table栏的索引  
									var index = $(this).index();
									console.log(index);
									//根据这个索引切换，下面的展示  
									$("li").eq(index).addClass("selected").siblings().removeClass("selected");

									//获取当前点击项目的ID
									var indexId = $(this).attr('id');
									console.log(indexId);

									//新建数组，将当前点击项的id赋值给当前要显示的数组作为KEY值，就获取的当前显示项的数据
									console.log(jsArr[this.id])

									var jsArri = jsArr[this.id];
									//新建对象
//									var obj = {
//										items: jsArri
//									};
//									console.log(obj)
//
//									
//									
//										//调用模板引擎方法，填充数据
//									var result = template('template', obj);
//									$('.medialist').html(result);
//
//									console.log(jsArri);
									

									// 分页
									$('#page').html("");
						            var pageData=jsArri.length;
						            console.log(pageData)
									$(function(){
										var count = pageData;//设置总条数
										console.log(count)
										var pageSize=5;//每页显示的条数
										var pageCount = Math.ceil(count/pageSize);//能显示几页
										console.log(pageCount)
										var currentPage=1;//默认显示第一页
										//做个分页按钮
										for (var i=1;i<=pageCount;i++) {
											var pageN='<page class="pageName" href="" selectPage="'+i+'">第'+i+'页</page>'
											$('#page').append(pageN);
										}
										
										//默认显示第一页
										 $('.medialist').html(''); 
										for(i=(currentPage-1)*pageSize;i<pageSize*currentPage;i++){   
											 console.log(i);
											 console.log(jsArri[i]);
											 var obj = {
										         items: jsArri[i]
									          };
									          console.log(obj);
									          
									         var result = template('template', obj);
//									         $('.medialist').html(result);

									         console.log(result); 
											 
											 
                                            $('.medialist').append(result);  
                                             };
                                             
                                         //显示选择页的内容  
                                         $('page').click(function(){ 
                                         	console.log("SSSS")
                                     var selectPage=$(this).attr('selectPage');  
                                             $('.medialist').html('');  
//                            
                                             for(i=(selectPage-1)*pageSize;i<pageSize*selectPage;i++){  
                                                 var obj = {
										         items: jsArri[i]
									          };
									          console.log(obj);
									          
									         var result = template('template', obj);
//									

									         console.log(result); 

                                            $('.medialist').append(result);  
                                             }  
//                                           $('.medialist').append(end);  
                                             });       
										     
										
									})
                                    






									//点击预览图显示弹窗

									$(".reloadimg,.title").on("click", function() {

										//取得当前点击的预览图的下标

										var indexB = $(this).parent().parent().parent().index();

										//										alert(indexB);

										//将预览图的下标作为当前显示的国家数据的中的urlpc值

										var urlpc = jsArri[indexB].urlpc;
										var title = jsArri[indexB].title

										console.log(urlpc);
										if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)) {
											//Layer弹窗开始
											layer.open({
												type: 2,
												title: title,
												area: ['320px', '240px'],
												shade: 0.6,
												closeBtn: 0,
												shadeClose: true,
												content: urlpc,

											});
//											layer.msg('点击任意处可关闭', function() {
//													time: 500
//												}
												//Layer弹窗结束
//											)

										} else {
											//Layer弹窗开始
											layer.open({
												type: 2,
												title: title,
												area: ['640px', '360px'],
												shade: 0.6,
												closeBtn: 0,
												shadeClose: true,
												content: urlpc,

											});
											layer.msg('点击任意处可关闭', function() {
												time: 500
											})
											//Layer弹窗结束
										}

										//										

									});

								});

								//加载第一项美国
								$("#Americia").trigger("click");

							}
						})

					}
				</script>

				<div class="right fr advert">
					<div class="zixun">
						<span class="title1">热门资讯</span>
						<span class="title1 fr">
						    <a href="http://liuxue.xdf.cn/xian/">更多》</a>
					    </span>
						<div class="link">
							<a href="http://liuxue.xdf.cn/xian/mglh/xjslh/pmjx/1157967.shtml"><img src="./img/America.jpg" alt=""></a> 
							<a href="http://liuxue.xdf.cn/blog/zhaoxinnan/"><img src="./img/xinnan.jpg" alt=""></a> 
						</div>
					</div>
					<div class="chanpin">
						<span class="title1">热门产品</span>
						<span class="title1 fr">
						<a href="http://liuxue.xdf.cn/Product/">更多》</a>
					</span>
						<div class="link">
							<a href="http://liuxue.xdf.cn/special/aus/growingup/"><img src="./img/yingling.jpg" alt=""></a> 
							<a href="http://liuxue.xdf.cn/special/usa/postgraduate_bjts/"><img src="./img/beijing.jpg" alt=""></a>
							
						</div>
					</div>

				</div>
			</div>
		</div>

		<script src="js/index.js"></script>
	</body>

</html>